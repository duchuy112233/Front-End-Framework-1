<div
  *ngIf="deleteMessage"
  class="mt-6 p-4 bg-green-100 border border-green-400 text-center text-green-700 rounded-md shadow-lg"
>
  {{ deleteMessage }}
</div>

<div class="container mx-auto mt-8">
  <div class="flex flex-row items-center mb-4">
    <label for="search" class="w-1/6">Search:</label>
    <input
      id="search"
      type="text"
      class="w-2/6 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
      [(ngModel)]="filterValue"
      (input)="filter()"
    />
  </div>
  <div class="flex flex-row mb-4">
    <h2 class="w-full font-bold">Filter by:</h2>
  </div>
</div>

<div class="overflow-x-auto">
  <table class="min-w-full divide-y-2 divide-gray-200 bg-white text-sm">
    <thead class="ltr:text-left rtl:text-right">
      <tr>
        <th class="px-4 py-2 font-medium text-gray-900">Image</th>
        <th class="px-4 py-2 font-medium text-gray-900">Name</th>
        <th class="px-4 py-2 font-medium text-gray-900">Discount</th>
        <th class="px-4 py-2 font-medium text-gray-900">stock</th>
        <th class="px-4 py-4 font-medium text-gray-900">Price</th>
        <th class="px-4 py-2 font-medium text-gray-900">Rating</th>
        <th class="px-4 py-2 font-medium text-gray-900">Action</th>
      </tr>
    </thead>
    <tbody class="divide-y divide-gray-200">
      <tr *ngFor="let product of products">
        <td class="px-4 py-2 text-gray-700">
          <a href="#">
            <img
              class="w-[150px] h-[90px]"
              [src]="product.thumbnail"
              alt="{{ product.title }}"
            />
          </a>
        </td>
        <td class="px-4 py-2 font-medium text-gray-900">{{ product.title }}</td>
        <td class="px-4 py-2 text-gray-700">
          {{ product.discountPercentage }}
        </td>
        <td class="px-4 py-2 text-gray-700">{{ product.stock }}</td>
        <td class="px-4 py-2 text-gray-700 ">{{ product.price }} $</td>
        <td class="px-4 py-2 text-gray-700">
          <div class="px-2 flex items-center">
            <div
              class="crop"
              [style.width.px]="((product?.rating ?? 0) * 90) / 5"
            >
              <div style="width: 90px">
                <span class="fa fa-star text-yellow-500"></span>
                <span class="fa fa-star text-yellow-500"></span>
                <span class="fa fa-star text-yellow-500"></span>
                <span class="fa fa-star text-yellow-500"></span>
                <span class="fa fa-star text-yellow-500"></span>
              </div>
            </div>
          </div>
        </td>

        <td class="px-4 py-2 text-gray-700">
          <a
          [routerLink]="['/details', product.id]"
          class="mr-2 inline-block px-3 py-1 text-sm font-medium text-green-600 border border-green-600 rounded-md hover:bg-green-600 hover:text-white focus:outline-none focus:ring active:bg-indigo-500"
          >View</a
        >
          <a
            href="#"
            class="mr-2 inline-block px-3 py-1 text-sm font-medium text-indigo-600 border border-indigo-600 rounded-md hover:bg-indigo-600 hover:text-white focus:outline-none focus:ring active:bg-indigo-500"
            >Edit</a
          >
          <a
            class="inline-block px-3 py-1 text-sm font-medium text-red-600 border border-red-600 rounded-md hover:bg-red-600 hover:text-white focus:outline-none focus:ring active:bg-red-500"
            (click)="handleDeleteProduct(product.id)"
            >Delete</a
          >
        </td>
      </tr>
    </tbody>
  </table>
</div>
